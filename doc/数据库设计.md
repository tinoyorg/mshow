# 数据库设计

* 数据库设计原则上遵循第三范式约束，仅在必要时增加冗余数据以提高性能。

* 数据库的字符集应该适配几乎所有的汉字字符，因此采用`utf8mb4`字符集。
* 创建数据库访问账户与密码，并向用户授予数据表增删改查的权限。
* 系统通过不同的数据库区分不同环境，软件配置需要更加灵活。

数据库创建脚本

```sql
CREATE SCHEMA `mshow_env` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ;
```

## 用户相关

### 用户权限表

用于储存用户鉴权所需信息，并记录微信登录后访问数据接口的相关参数

表名：**user_auth**

| 键名        | 类型        | 非空 | 索引             | 外键 | 含义               | 备注 |
| ----------- | ----------- | ---- | ---------------- | ---- | ------------------ | ---- |
| uid         | int(11)     | YES  | PRIMARY，UNIQUE1 |      | 用户编号           | 自增 |
| openid      | varchar(45) | YES  | UNIQUE2          |      | 用户唯一标识       |      |
| session_key | varchar(45) | YES  | NO               |      | 会话密钥           |      |
| unionid     | varchar(45) | YES  | NO               |      | 开放平台唯一标识符 |      |
| auth        | varchar(45) | YES  | NO               |      | 用户的权限标识     |      |
|             |             |      |                  |      |                    |      |

### 用户信息表

用于储存用户更多更全面的个人基本信息

表名：**user_info**

| 键名     | 类型        | 非空 | 索引 | 外键          | 含义               | 备注 |
| -------- | ----------- | ---- | ---- | ------------- | ------------------ | ---- |
| uid| int(11)     | YES  |      | user_auth.uid | 用户编号||
| sex| varchar(45) | YES  | NO   |               | 用户性别|      |
| nick     | varchar(45) | YES  | NO   |               | 用户昵称       |      |
| name     | varchar(45) | YES  | NO   |               | 用户姓名          |      |
| avatar   | TEXT        | YES  | NO   |               | 用户头像 | Base64 |
| location | varchar(45) | YES  | NO   |               | 用户来源     |      |
| position | varchar(45) | YES  | NO   |               | 用户位置           |      |
||||||||

## 场馆相关

### 展馆信息表

表名：**exhibition**

| 键名      | 类型        | 非空 | 索引    | 外键 | 含义     | 备注   |
| --------- | ----------- | ---- | ------- | ---- | -------- | ------ |
| eid       | int(11)     | YES  | PRIMARY |      | 场馆编号 | 自增   |
| name      | varchar(45) | YES  | NO      |      | 场馆名称 |        |
| phone     | varchar(45) | YES  | NO      |      | 场馆电话 |        |
| avatar    | TEXT        | YES  | NO      |      | 场馆头像 | Base64 |
| position  | varchar(45) | YES  | NO      |      | 场馆位置 |        |
| introduce | TEXT        | YES  | NO      |      | 场馆简介 |        |
| open_time | varchar(45) | YES  | NO      |      | 开馆时间 |        |
| end_time  | varchar(45) | YES  | NO      |      | 闭馆时间 |        |
|           |             |      |         |      |          |        |



****



**未完待续**



## 展览

展览编号

所属场馆（外键）

名称

位置

联系电话

简介

图片

等





## 展品

展品编号

所属展馆（外键）

所属展览（外键）（NULL）

名称

位置

联系电话

简介

图片



点赞数量

分享数量



等





## 评论

评论编号

用户编号（外键）

评价对象

评价编号

评论内容



## 收藏夹

收藏编号

用户编号（外键）

评价对象

评价编号

收藏时间





## 浏览记录

收藏编号

用户编号（外键）

评价对象

评价编号

收藏时间





## 投诉、反馈、举报

反馈编号

用户编号（外键）

评价对象

评价编号

时间

反馈类型

反馈内容



## 预约记录

预约编号

用户编号

展览编号

预约时间

到馆时间（待定）

预约状态（待确认，已确认，已拒绝，已进馆）



## 操作日志







